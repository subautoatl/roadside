<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instant Arrival Roadside Assistance | 24/7 Nationwide Coverage</title>
    <meta name="description" content="Premium roadside assistance memberships with instant dispatch. Choose from our affordable plans with unmatched service guarantees.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;900&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Square Payment Form SDK -->
    <script src="https://js.squareup.com/v2/paymentform"></script>
    <style>
        :root {
            --primary: #FF5F00; /* Brand orange */
            --secondary: #003366; /* Navy blue */
            --accent: #00CC99; /* Green */
            --light: #F8F9FA;
            --dark: #212529;
            --gray: #6C757D;
        }
        
        /* [Previous CSS styles remain the same] */
        
        /* Square Input Styling */
        .sq-input {
            border: 1px solid #ddd;
            padding: 12px;
            margin-bottom: 15px;
            border-radius: 4px;
            width: 100%;
            font-size: 16px;
        }
        .sq-input--focus { 
            border-color: var(--secondary);
            box-shadow: 0 0 0 2px rgba(0, 51, 102, 0.2);
        }
        .sq-input--error { 
            border-color: #dc3545;
        }
        #sq-card-container { 
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <!-- Header (No changes needed) -->
    <header>
        <div class="header-container">
            <a href="#" class="logo">
                <i class="fas fa-truck-pickup"></i>
                Instant Arrival
            </a>
            <nav>
                <ul>
                    <li><a href="#features">Features</a></li>
                    <li><a href="#pricing">Pricing</a></li>
                    <li><a href="#testimonials">Reviews</a></li>
                    <li><a href="#faq">FAQ</a></li>
                </ul>
            </nav>
            <a href="#signup" class="cta-button">Join Now</a>
        </div>
    </header>

    <!-- [Keep all hero, features, pricing sections unchanged] -->

    <!-- Updated Signup Form with Square -->
    <section class="signup-form" id="signup">
        <div class="form-container">
            <div class="form-header">
                <h2>Join Instant Arrival Today</h2>
                <p>Complete this form to start your membership</p>
            </div>
            <div class="form-body">
                <form id="membership-form">
                    <!-- Member Info Fields -->
                    <div class="form-row">
                        <div class="form-group">
                            <label for="first-name">First Name</label>
                            <input type="text" id="first-name" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="last-name">Last Name</label>
                            <input type="text" id="last-name" class="form-control" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="email">Email Address</label>
                        <input type="email" id="email" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="phone">Phone Number</label>
                        <input type="tel" id="phone" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="address">Street Address</label>
                        <input type="text" id="address" class="form-control" required>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="city">City</label>
                            <input type="text" id="city" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="state">State</label>
                            <select id="state" class="form-control" required>
                                <option value="">Select State</option>
                                <!-- All 50 states here -->
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="zip">ZIP Code</label>
                            <input type="text" id="zip" class="form-control" required>
                        </div>
                    </div>
                    
                    <!-- Plan Selection -->
                    <div class="form-group plan-selector">
                        <label>Select Your Plan</label>
                        <div class="plan-options">
                            <div class="plan-option" data-plan="basic">
                                <h4>Basic</h4>
                                <div class="price">$8.99/mo</div>
                            </div>
                            <div class="plan-option selected" data-plan="plus">
                                <h4>Plus</h4>
                                <div class="price">$14.99/mo</div>
                            </div>
                            <div class="plan-option" data-plan="premium">
                                <h4>Premium</h4>
                                <div class="price">$19.99/mo</div>
                            </div>
                            <div class="plan-option" data-plan="vip">
                                <h4>VIP</h4>
                                <div class="price">$29.99/mo</div>
                            </div>
                        </div>
                        <input type="hidden" id="selected-plan" name="plan" value="plus">
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="annual-billing">
                            Get 15% discount with annual billing
                        </label>
                    </div>
                    
                    <div class="form-group">
                        <label for="vehicle-info">Vehicle Information</label>
                        <input type="text" id="vehicle-info" class="form-control" placeholder="Make, Model, Year" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="license-plate">License Plate</label>
                        <input type="text" id="license-plate" class="form-control" required>
                    </div>
                    
                    <!-- Square Payment Section -->
                    <div class="form-group">
                        <h3>Payment Information</h3>
                        <div id="sq-card-container"></div>
                        <input type="hidden" id="card-nonce" name="nonce">
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="terms-agreement" required>
                            I agree to the <a href="#" target="_blank">Terms of Service</a>
                        </label>
                    </div>
                    
                    <button type="submit" class="submit-btn" id="submit-payment">
                        Start Membership
                    </button>
                </form>
            </div>
        </div>
    </section>

    <!-- [Rest of your sections remain unchanged] -->

    <script>
        // Square Payment Form Configuration
        const paymentForm = new SqPaymentForm({
            // REPLACE THESE WITH YOUR SQUARE CREDENTIALS:
            applicationId: 'YOUR_SANDBOX_APPLICATION_ID', // From Square Developer Dashboard
            locationId: 'YOUR_LOCATION_ID', // From Square Business Dashboard
            inputClass: 'sq-input',
            inputStyles: [{
                fontSize: '16px',
                padding: '12px',
                placeholderColor: '#6C757D'
            }],
            cardNumber: { elementId: 'sq-card-number', placeholder: 'Card Number' },
            cvv: { elementId: 'sq-cvv', placeholder: 'CVV' },
            expirationDate: { elementId: 'sq-expiration-date', placeholder: 'MM/YY' },
            postalCode: { elementId: 'sq-postal-code', placeholder: 'ZIP' },
            callbacks: {
                methodsSupported: (methods) => {
                    if (methods.card) {
                        document.getElementById('sq-card-container').style.display = 'block';
                    }
                },
                createPaymentRequest: () => {
                    const plan = document.getElementById('selected-plan').value;
                    const isAnnual = document.getElementById('annual-billing').checked;
                    const amount = calculatePlanAmount(plan, isAnnual);
                    return {
                        currencyCode: "USD",
                        total: {
                            label: "Instant Arrival Membership",
                            amount: amount.toString(),
                            pending: false
                        }
                    };
                },
                cardNonceResponseReceived: (errors, nonce) => {
                    if (errors) {
                        console.error('Payment error:', errors);
                        alert('Payment error: ' + errors.map(e => e.message).join(', '));
                        document.getElementById('submit-payment').disabled = false;
                        return;
                    }
                    document.getElementById('card-nonce').value = nonce;
                    submitMembershipForm();
                }
            }
        });

        // Calculate plan price
        function calculatePlanAmount(plan, isAnnual) {
            const prices = {
                basic: 8.99,
                plus: 14.99,
                premium: 19.99,
                vip: 29.99
            };
            let amount = prices[plan];
            if (isAnnual) amount = (amount * 12) * 0.85; // 15% annual discount
            return amount.toFixed(2);
        }

        // Form submission handler
        document.getElementById('membership-form').addEventListener('submit', function(e) {
            e.preventDefault();
            document.getElementById('submit-payment').disabled = true;
            
            if (!validateForm()) {
                document.getElementById('submit-payment').disabled = false;
                return;
            }
            
            paymentForm.requestCardNonce();
        });

        // Basic form validation
        function validateForm() {
            const required = ['first-name', 'last-name', 'email', 'phone', 'address', 
                            'city', 'state', 'zip', 'vehicle-info', 'license-plate'];
            for (const fieldId of required) {
                const field = document.getElementById(fieldId);
                if (!field.value.trim()) {
                    alert(`Please fill in ${field.placeholder || field.name}`);
                    field.focus();
                    return false;
                }
            }
            if (!document.getElementById('terms-agreement').checked) {
                alert('Please agree to the Terms of Service');
                return false;
            }
            return true;
        }

        // Submit to your backend (demo only - replace with real API call)
        function submitMembershipForm() {
            const formData = {
                firstName: document.getElementById('first-name').value,
                lastName: document.getElementById('last-name').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                address: document.getElementById('address').value,
                city: document.getElementById('city').value,
                state: document.getElementById('state').value,
                zip: document.getElementById('zip').value,
                plan: document.getElementById('selected-plan').value,
                annualBilling: document.getElementById('annual-billing').checked,
                vehicle: document.getElementById('vehicle-info').value,
                licensePlate: document.getElementById('license-plate').value,
                paymentNonce: document.getElementById('card-nonce').value
            };
            
            console.log('Form data ready for backend:', formData);
            alert('Demo: Payment processed! (In production, this would call your backend)');
            
            // In production, you would:
            // 1. Send formData to your server
            // 2. Server processes payment via Square API
            // 3. Redirect to success page
        }

        // Initialize payment form
        paymentForm.build();
    </script>
</body>
</html>
